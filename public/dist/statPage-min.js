"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _lodash=require("lodash"),_lodash2=_interopRequireDefault(_lodash),_q=require("q"),_q2=_interopRequireDefault(_q),_restClient=require("./dist/restClient"),_restClient2=_interopRequireDefault(_restClient),_KeyValListView=require("./dist/components/KeyValListView"),_KeyValListView2=_interopRequireDefault(_KeyValListView),_util=require("./dist/util"),_util2=_interopRequireDefault(_util),CountTableComponent=React.createClass({displayName:"CountTableComponent",getInitialState:function(){return{searchTerm:"",countMap:[]}},componentDidMount:function(){this.setState({countMap:this.props.countMap})},render:function(){var key="control-count-table",_props=this.props,badgeExtraText=_props.badgeExtraText,onSelectRow=_props.onSelectRow;return React.createElement("div",{id:key,key:key},React.createElement("div",{className:"col-sm-12 mb15"},React.createElement("div",{className:"input-group"},React.createElement("span",{className:"input-group-addon",id:"search-term-input"},"Search"),React.createElement("input",{type:"text",onChange:this.onSearchTermChanged,value:this.state.searchTerm,className:"form-control",placeholder:"Enter text to search ...","aria-describedby":"search-term-input"}))),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"text-center mb15"},React.createElement("strong",null,"Total Matches: ",_lodash2["default"].size(this.state.countMap))),React.createElement(_KeyValListView2["default"],{key:key+"-table-detail",objects:this.state.countMap,keyLabel:this.props.keyLabel,valueLabel:"Count",emptyMsg:"No data",badgeExtraText:badgeExtraText,onSelectRow:onSelectRow})))},onSearchTermChanged:function(_ref){var newSearchTerm=_ref.target.value;newSearchTerm=newSearchTerm.toLowerCase(),this.setState({searchTerm:newSearchTerm,countMap:_util2["default"].findMatchingKeysInHash(this.props.countMap,newSearchTerm)})}}),StatPage=React.createClass({displayName:"StatPage",render:function(){return React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-5"},React.createElement("div",{className:"panel panel-success"},React.createElement("div",{className:"panel-heading"},React.createElement("h3",{className:"panel-title"},"How many components in a Namespace?")),React.createElement("div",{className:"panel-body"},React.createElement(CountTableComponent,{countMap:this.props.namespaceCountMap,keyLabel:"Namespaces",badgeExtraText:"Components",onSelectRow:this.selectNameSpace})))),React.createElement("div",{className:"col-sm-7"},React.createElement("div",{className:"panel panel-primary"},React.createElement("div",{className:"panel-heading"},React.createElement("h3",{className:"panel-title"},"How many time a component is used?")),React.createElement("div",{className:"panel-body"},React.createElement(CountTableComponent,{countMap:this.props.controlCountMap,keyLabel:"Controls",badgeExtraText:"References",onSelectRow:this.selectControl})))))},selectNameSpace:function(keyword){location.href=_util2["default"].getQueryUrl(keyword+":")},selectControl:function(keyword){location.href=_util2["default"].getQueryUrl(""+keyword)}});_util2["default"].render(function(){var controlCountMap=_restClient2["default"].getControlCountMap(),namespaceCountMap=_restClient2["default"].getNamespaceCountMap();ReactDOM.render(React.createElement(StatPage,{namespaceCountMap:namespaceCountMap,controlCountMap:controlCountMap}),document.querySelector("#body"))});