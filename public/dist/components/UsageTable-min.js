"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=require("lodash"),_lodash2=_interopRequireDefault(_lodash),_util=require("dist/util"),_util2=_interopRequireDefault(_util),_KeyValTable=require("dist/components/KeyValTable"),_KeyValTable2=_interopRequireDefault(_KeyValTable),_KeyValueXmlSyntax=require("dist/components/KeyValueXmlSyntax"),_KeyValueXmlSyntax2=_interopRequireDefault(_KeyValueXmlSyntax),_ControlDetailLink=require("dist/components/ControlDetailLink"),_ControlDetailLink2=_interopRequireDefault(_ControlDetailLink),UsageTable=React.createClass({displayName:"UsageTable",getInitialState:function(){return{useXmlForm:!1}},render:function(){var _this=this,selectedControlName=this.props.selectedControlName,usageMaps=this.props.usage,usageWrapperKey=selectedControlName+"-usage-"+new Date,allUsagesDom=_lodash2["default"].map(usageMaps,function(usageDetails,callerControlName){var shortCallerControlName=callerControlName.substr(0,callerControlName.lastIndexOf(".")),usagesDom=_lodash2["default"].map(usageDetails,function(usageDetail,idx){var usageDetailDomKey=selectedControlName+"-"+callerControlName+"-"+idx+"-usage}",attributeDetails=usageDetail.attribs,usageDetailDom=_this.state.useXmlForm?_this._getXmlViewForm(selectedControlName,attributeDetails):_this._getTableViewForm(selectedControlName,attributeDetails);return React.createElement("div",{key:usageDetailDomKey,className:"panel panel-info"},React.createElement("div",{className:"panel-heading"},"Usage #",idx+1),React.createElement("div",{className:"panel-body"},usageDetailDom))}),curControlUsageCount=_lodash2["default"].size(usageDetails)>1?_lodash2["default"].size(usageDetails)+" References":null;return React.createElement("div",{key:selectedControlName+"-"+callerControlName+"-usage}"},React.createElement("div",null,React.createElement(_ControlDetailLink2["default"],{mainText:shortCallerControlName,subText:curControlUsageCount})),usagesDom)});return _lodash2["default"].size(usageMaps)>0?React.createElement("div",{key:usageWrapperKey},React.createElement("div",{className:"mb15"},React.createElement("ul",{className:"nav nav-pills nav-justified"},React.createElement("li",{role:"presentation",className:this.state.useXmlForm?"":"active",onClick:function(){return _this.changeViewFormat("table")}},React.createElement("a",null,"Table Form")),React.createElement("li",{role:"presentation",className:this.state.useXmlForm?"active":"",onClick:function(){return _this.changeViewFormat("xml")}},React.createElement("a",null,"XML Form")))),React.createElement("div",null,allUsagesDom)):React.createElement("div",{key:usageWrapperKey},"This component has not been used.")},_getXmlViewForm:function(tagName,objects){return React.createElement(_KeyValueXmlSyntax2["default"],{objects:objects,tagName:tagName})},_getTableViewForm:function(tagName,objects){return _lodash2["default"].size(objects)>0?React.createElement(_KeyValTable2["default"],{objects:objects,clickToViewDetail:!1,showHeader:!1,showIndex:!1}):React.createElement("div",null,"Called with No Arguments")},changeViewFormat:function(newForm){this.setState({useXmlForm:"xml"===newForm})},shouldComponentUpdate:function(nextProps,nextState){return!0}});exports["default"]=UsageTable;